---
title: Zmienne CSS z animacjami ğŸ˜¶â€ğŸŒ«ï¸
date: 07-31-2022
category: css
published: true
excerpt: Czy kiedykolwiek prÃ³bowaÅ‚eÅ› robiÄ‡ proste animacje z poziomu JavaScripta? JeÅ¼eli tak, to sprawdÅº jak zmienne CSS upraszczajÄ… nam Å¼ycie.
---

Kiedy budujemy aplikacje typu single-page np. z pomocÄ… Reakta to czasami zdarza siÄ™ mieszaÄ‡ style z logikÄ… JavaScripta. To nie jest dobre podejÅ›cie poniewaÅ¼, to jak strona powinna wyglÄ…daÄ‡ powinno naleÅ¼eÄ‡ tylko do CSSa. ZwrÃ³Ä‡my uwagÄ™ na pewien przykÅ‚ad.

```js
export const EmojisList = () => {
  const emojis = [
    { id: 1, emoji: 'ğŸ¥°' },
    { id: 2, emoji: 'ğŸ˜' },
    { id: 3, emoji: 'ğŸ¤¨' },
    { id: 4, emoji: 'ğŸ¤—' },
    { id: 5, emoji: 'ğŸ˜³' },
  ];
  return (
    <ul className="list">
      {emojis.map(({ id, emoji }, index) => (
        <li key={id} className="list__item">
          I am {index + 1} emoji {emoji}
        </li>
      ))}
    </ul>
  );
};
```

W powyÅ¼szym przykÅ‚adzie mapujemy tablicÄ™ z emoji a nastÄ™pnie je wyÅ›wietlamy, nic skomplikowanego. Ale uznajmy, Å¼e chcemy dodaÄ‡ tutaj jakÄ…Å› super animacje, Å¼eby elementy ujawniaÅ‚y siÄ™ kolejno jeden za drugim (ang. <i>staggered animation</i>). MoÅ¼na kaÅ¼demu z nich dodaÄ‡ odpowiedniÄ… klasÄ™ a nastÄ™pnie w stylach prawidÅ‚owo to obsÅ‚uÅ¼yÄ‡.

```js
return (
  <ul className="list">
    {emojis.map(({ id, emoji }, index) => (
      <li key={id} className={cx('list__item', `list__item--${index}`)}>
        I am {index + 1} emoji {emoji}
      </li>
    ))}
  </ul>
)
```
Elementom dodajemy klasy z przyrostkiem `index`. Tylko tutaj pojawia siÄ™ pewien problem, poniewaÅ¼ trzeba tÄ™ kaÅ¼dÄ… klasÄ™ dodaÄ‡ do pliku CSS ğŸ¤¨

```css
.list__item--1 {
  animation-delay: 0.3s;
}

.list__item--2 {
  animation-delay: 0.6s;
}

.list__item--3 {
  animation-delay: 0.9s;
}

/* ... */

.list__item--123 {
  /* Czy naprawdÄ™ potrzebujemy tyle elementÃ³w? ğŸ˜« */
}
```

Jak widaÄ‡ to rozwiÄ…zanie jest nawet dobre, ale tylko gdy nie ma wiele elementÃ³w. JednÄ… opcjÄ…, Å¼eby ten problem uproÅ›ciÄ‡ moÅ¼e byÄ‡ zrezygnowanie z tworzenia nowych klas i skorzystanie z selektora `nth-child()`. Ale dlugoÅ›Ä‡ pliku CSS dalej bÄ™dzie taka sama. Z drugiej strony jeÅ¼eli jest potrzeba dodaÄ‡ kolejny element do listy to trzeba stworzyÄ‡ nowÄ… klasÄ™ co bardzo utrudnia. To moÅ¼e powinniÅ›my dodaÄ‡ style bezpoÅ›rednio w plikach JavaScripta? 

```js
const DELAY = 0.3;
return (
  <ul className="list">
    {emojis.map(({ id, emoji }, index) => (
      <li
        key={id}
        className="list__item"
        style={{
          animationDelay: `${index * DELAY}s`,
        }}
      >
        I am {index + 1} emoji {emoji}
      </li>
    ))}
  </ul>
);
```

To juÅ¼ wyglÄ…da o wiele lepiej. Ale tak jak pisaÅ‚em na poczÄ…tku tego artykuÅ‚u, dodawanie reguÅ‚ CSSa z poziomu JavaScripta nie jest dobre. Dlatego tutaj przychodzÄ… nam z pomocÄ… zmienne CSSowe.

```ts
return (
  <ul className="list">
    {emojis.map(({ id, emoji }, index) => (
      <li key={id} className="list__item" style={{ '--i': index } as CSSProperties}>
        I am {index + 1} emoji {emoji}
      </li>
    ))}
  </ul>
);
```
Jak widaÄ‡ zmienne CSS sÄ… naprawde bardzo pomocne. W powyÅ¼szym przykÅ‚adzie do kaÅ¼dego elementu przypisywana jest zmienna `--i` z wartoÅ›ciÄ… aktualnego indeksu do ktÃ³rego pÃ³Å¼niej moÅ¼na odnieÅ›Ä‡ siÄ™ z poziomu CSSa. Inaczej mÃ³wiÄ…c z poziomu styli wiadomo jaki aktualny element listy jest brany pod uwagÄ™. 

<Callout>JeÅ¼eli robisz ten przykÅ‚ad z Reaktem i TypeScriptem dodaj asercje typu `as CSSProperties` poniewaÅ¼ inaczej kompilator nie pozwoli przepuÅ›ciÄ‡ Ci tej zmiennej.</Callout>

```css
.list__item {
  --delay: 0.15s;
  --duration: 0.3s;

  /* Your custom animation */
  animation-name: slide-in;
  animation-fill-mode: both;
  animation-duration: var(--duration);
  animation-timing-function: ease-in-out;

  animation-delay: calc(var(--i) * var(--delay));
}
```

Teraz wszystko znajdujÄ™ siÄ™ w pliku CSS i iloÅ›Ä‡ emoji juÅ¼ nie jest problem. Zmiena `--i` moÅ¼e byÄ‡ uÅ¼ywana w obliczeniach. Czy to nie jest niesamowite? ğŸ¤¯

<div style={{ textAlign: 'center' }}>
  <Image
    alt="staggered list"
    src="/gifs/staggered-list.gif"
    width="386"
    height="276"
  />
</div>
