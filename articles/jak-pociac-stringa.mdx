---
title: Mylące metody
date: 02-27-2022
category: javascript
published: true
excerpt: Coś tutaj będzie, ale później 🙄
---

Czy zdarzyło ci się kiedyś, żeby 'pociąć' stringa na części i nie zajrzeć do dokumentacji? Jeżeli tak, to jesteś naprawdę dużym szczęściarzem. Ja zawsze muszę zerknąć. Można się pogubić - split, slice, splice, substring i substr. Niektóre się nawet tak samo nazywają się dla stringów i dla tablic. Ale może da się jakoś w tym odnaleźć? Zobaczmy.

## Splice

`Splice` zmienia zawartość tablicy. Jako pierwszy argument przyjmuje indeks od którego ma zacząć operacje. Drugi argument (jest opcjonalny) określa ilość elementów do zmodyfikowania. Pozostałymi argumentami to elementy jakie opcjonalnie chcemy dodać. Można usuwać elementy, zamieniać bądz dodawać nowe. __Ważne jest to że my mutujemy zawartość tej tablicy!__ Funkcja splice nie zwraca nowej tablicy tylko zmienia referencję aktualnej. A jeżeli usuniemy za to coś z tablicy, to splice zwróci nam te elementy, których się pozbyliśmy 😉

```js
// splice(indeksStartowy, ileUsunąć, element1, element2, elementN)

const array = ['zero', 'pierwszy', 'drugi', 'trzeci'];

array.splice(2, 0, 'element-1', 'element-2');

// ["zero", "pierwszy", "element-1", "element-2", "drugi", "trzeci"]
console.log(array)

// Usuwa od indeksu -2 (czyli 2 od końca) łącznie 2 elementy 
const removed = array.splice(-2, 2);

// ["drugi", "trzeci"] 
console.log(removed);

// ["zero", "first", "element-1", "element-2"]
console.log(array)

// Usuwa wszystko od indeksu 0 do końca
array.splice(0);

// []
console.log(array);
```

## Slice

Jest bardzo podobny do `splice` ale z jedną bardzo ważna różnicą - zwraca __[shallow copy](https://developer.mozilla.org/en-US/docs/Glossary/Shallow_copy)__ tablicy, a samo w sobie nie modyfikuje w żaden sposób tablicy bazowej na której wykonujemy tę metodę.

Shallow copy tworzy płytką kopię. Czyli jeżeli zwrócona tablica przez splice zawiera obiekty, i w jednym z nich nastąpi jakaś zmiana, to zmiany te też będą miały wpływ na tablice początkową. Jest to bardzo niebezpieczne działanie. Jeżeli ktoś zapomni i dokona jakiejś modyfikacji, może później dojść do jakiś dziwnych i nieoczekiwanych zachowań. Jeżeli chcemy za to stworzyć nową tablicą, której mutowanie nie będzie miało wpływu na tablicę poczatkową, wystarczy zrobić __[deep copy](https://developer.mozilla.org/en-US/docs/Glossary/Deep_copy)__.

```js
// Shallow copy
const array = [{ value: 'zero' }, { value: 'first' }, { value: 'second' }, { value: 'third' }];

const shallow = array.slice(0, 1);
shallow[0].value = 'modified';

// { value: 'modified' };
console.log(array[0]);

// Deep copy
const array2 = [{ value: 'zero' }, { value: 'first' }, { value: 'second' }, { value: 'third' }];

const deep = JSON.parse(JSON.stringify(array2.slice(0, 1)));
deep[0].value = 'modified';

// { value: 'zero' };
console.log(array2[0]);
```

Trochę się tutaj działo to może teraz coś prostszego - `string`. Tak, metoda slice też istnieje dla stringa. Działa dokładnie prawie tak samo jak dla tablic. Pierwszym argumentem jest indeks początkowy, a drugim jest indeks końcowy. Tylko nie można dodawać nowych znaków do stringa, tak jak się dodawało nowe elementy do tablicy. Slice dla stringów służy tylko i wyłącznie do _wyłuskiwania_ jakichś konkretnych fragmentów.

```js
const introduction = 'Cześć! nazywam się Kamil';

const name = introduction.slice(-5);

// Kamil
console.log(name);

const greeting = introduction.slice(0, 6);

// Cześć!
console.log(greeting);
```

## Split

## Substring

## Substr